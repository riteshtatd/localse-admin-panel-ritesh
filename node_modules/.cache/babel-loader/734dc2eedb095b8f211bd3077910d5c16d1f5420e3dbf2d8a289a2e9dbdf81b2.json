{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{useDispatch}from\"react-redux\";import{setUserAuthStates}from\"../../redux/slices/userAuthSlice\";import\"./Login.css\";import{ADMIN_LOGIN}from\"../../apis/Apis\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const navigate=useNavigate();const dispatch=useDispatch();const[credentials,setCredentials]=useState({mobile_number:\"\",pin:\"\"});const handleChange=e=>{setCredentials({...credentials,[e.target.name]:e.target.value});};const handleLogin=async e=>{e.preventDefault();console.log(\"Login form submitted\");try{const res=await ADMIN_LOGIN(credentials);console.log(\"API Response:\",res);console.log(res,\"]]]]]]]]\");if((res===null||res===void 0?void 0:res.status_code)==200){console.log(\"Status code is 200\");if(res!==null&&res!==void 0&&res.jwt){console.log(\"JWT exists, setting auth states\");dispatch(setUserAuthStates({key:\"jwt\",value:res===null||res===void 0?void 0:res.jwt}));console.log(\"JWT set in state:\",res===null||res===void 0?void 0:res.jwt);dispatch(setUserAuthStates({key:\"refreshToken\",value:res===null||res===void 0?void 0:res.refresh_token}));console.log(\"Refresh token set in state:\",res===null||res===void 0?void 0:res.refresh_token);dispatch(setUserAuthStates({key:\"login\",value:true}));console.log(\"User login state set to true\");navigate(\"/dashboard\");setTimeout(()=>{alert(res===null||res===void 0?void 0:res.message);},100);console.log(\"Navigating to /dashboard\");}else{console.log(\"JWT not found in response\");alert(\"Invalid credentials, please try again.\");}}else{console.log(\"Error: Status code is not 200\",res===null||res===void 0?void 0:res.status_code);alert(\"Error logging in. Please try again.\");}}catch(error){console.log(\"Error during login process:\",error);alert((error===null||error===void 0?void 0:error.message)||\"Error logging in. Please try again.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:\"red\",margin:20},children:\"LocalSe\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-box\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"mobile_number\",placeholder:\"Username\",value:credentials.mobile_number,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-box\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"pin\",placeholder:\"Password\",value:credentials.pin,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-btn\",children:\"Login\"})]})]});};export default Login;","map":{"version":3,"names":["React","useState","useNavigate","useDispatch","setUserAuthStates","ADMIN_LOGIN","jsx","_jsx","jsxs","_jsxs","Login","navigate","dispatch","credentials","setCredentials","mobile_number","pin","handleChange","e","target","name","value","handleLogin","preventDefault","console","log","res","status_code","jwt","key","refresh_token","setTimeout","alert","message","error","className","children","style","color","margin","onSubmit","type","placeholder","onChange","required"],"sources":["/Users/mac/Desktop/localse-admin-panel/src/src/screens/Login/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { setUserAuthStates } from \"../../redux/slices/userAuthSlice\";\nimport \"./Login.css\";\nimport { ADMIN_LOGIN } from \"../../apis/Apis\";\n\nconst Login = () => {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n\n  const [credentials, setCredentials] = useState({\n    mobile_number: \"\",\n    pin: \"\",\n  });\n\n  const handleChange = (e) => {\n    setCredentials({ ...credentials, [e.target.name]: e.target.value });\n  };\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    console.log(\"Login form submitted\");\n\n    try {\n      const res = await ADMIN_LOGIN(credentials);\n      console.log(\"API Response:\", res);\n\n      console.log(res, \"]]]]]]]]\");\n\n      if (res?.status_code == 200) {\n        console.log(\"Status code is 200\");\n\n        if (res?.jwt) {\n          console.log(\"JWT exists, setting auth states\");\n\n          dispatch(setUserAuthStates({ key: \"jwt\", value: res?.jwt }));\n          console.log(\"JWT set in state:\", res?.jwt);\n\n          dispatch(\n            setUserAuthStates({\n              key: \"refreshToken\",\n              value: res?.refresh_token,\n            })\n          );\n          console.log(\"Refresh token set in state:\", res?.refresh_token);\n\n          dispatch(setUserAuthStates({ key: \"login\", value: true }));\n          console.log(\"User login state set to true\");\n\n          navigate(\"/dashboard\");\n          setTimeout(() => {\n            alert(res?.message);\n          }, 100);\n\n          console.log(\"Navigating to /dashboard\");\n        } else {\n          console.log(\"JWT not found in response\");\n          alert(\"Invalid credentials, please try again.\");\n        }\n      } else {\n        console.log(\"Error: Status code is not 200\", res?.status_code);\n        alert(\"Error logging in. Please try again.\");\n      }\n    } catch (error) {\n      console.log(\"Error during login process:\", error);\n      alert(error?.message || \"Error logging in. Please try again.\");\n    }\n  };\n\n  return (\n    <div className=\"login-container\">\n      <h1 style={{ color: \"red\", margin: 20 }}>LocalSe</h1>\n      <h2>Admin Login</h2>\n      <form onSubmit={handleLogin}>\n        <div className=\"input-box\">\n          <input\n            type=\"text\"\n            name=\"mobile_number\"\n            placeholder=\"Username\"\n            value={credentials.mobile_number}\n            onChange={handleChange}\n            required\n          />\n        </div>\n        <div className=\"input-box\">\n          <input\n            type=\"password\"\n            name=\"pin\"\n            placeholder=\"Password\"\n            value={credentials.pin}\n            onChange={handleChange}\n            required\n          />\n        </div>\n        <button type=\"submit\" className=\"login-btn\">\n          Login\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}